doctype html
html(ng-app='CMS')
    head
        title= title
        link(rel='stylesheet', href='../bower_modules/bootstrap/dist/css/bootstrap.css')
        link(rel='stylesheet', href='../bower_modules/bootstrap/dist/css/bootstrap-theme.css')
        link(rel='stylesheet', href='../stylesheets/style.css')
    body
        include partials/mainmenu
        div.container
        block content
        h1= title
        p Welcome to The Homepage
            div(ng-controller='postController')
                

                table( ng-model='Posts', ng-init='getPosts()' class='table table-bordered table-striped')
                    thead
                        td title
                        td description
                        td author
                        td comments
                        td actions
                    tbody
                        h2 Search Post:
                            input(ng-model='query')
                        h2 Posts
                        tr( ng-repeat='post in Posts | filter:query')
                            td {{ post.title }}
                            td {{ post.content }}
                            td {{ post.postedBy }}
                            td {{ post.comments }}
                            td
                                a(class='btn btn-success', href='/posts/{{ post._id }}') Read Post
                if locals.user
                    h2 Create Post
                    form
                        div.form-group
                            label(for='title') Title
                                input(type='text', class='form-control', id='title', name='title', placeholder='Title', ng-model='newpost.title', autofocus)
                        div.form-group
                            label(for='password') Content
                                input(type='text', class='form-control', id='content', name='content', placeholder='content', ng-model='newpost.content')
                    div(ng-controller='tagController')
                        h2 Tags
                        div( ng-model='Tags', ng-init='getTags()')
                            ul( ng-repeat='tag in Tags')
                                li
                                    label
                                        input(ng-model='newpost.tag',value='{{tag.name}}', type='checkbox', name='tag[]')
                                        span {{tag.name}}
                    button( ng-click='createPost(newpost)', class='btn btn-small btn-primary') Create Post


        script(type='text/javascript', src='../bower_modules/angular/angular.min.js')
        script(type='text/javascript', src='../js/app.module.js')
        script(type='text/javascript', src='../js/app.usercontroller.js')
        script(type='text/javascript', src='../js/app.userservice.js')
        script(type='text/javascript', src='../js/app.postcontroller.js')
        script(type='text/javascript', src='../js/app.postservice.js')
        script(type='text/javascript', src='../js/app.tagcontroller.js')
        script(type='text/javascript', src='../js/app.tagservice.js')